(()=>{"use strict";class t{constructor(t){this.description=t,this.isDone=!1}getDescription=()=>this.description}class e{constructor(t){this.title=t,this.tasks=[]}add=t=>{this.tasks.push(t)};remove=t=>{this.tasks.pop(t)};toString=()=>this.tasks.toString();getTitle=()=>this.title;getTasks=()=>this.tasks;setTitle=t=>this.title=t}const s=document.getElementById("formCreateTask"),o=document.getElementById("lists"),n=document.getElementById("overlay"),c=document.getElementById("formCreateList"),l=document.getElementById("buttonCreateNewList"),i=document.getElementById("buttonAddToLists"),a=document.getElementById("buttonAddTask");document.getElementById("inputTask"),l.onclick=()=>{c.classList.add("active"),n.classList.add("active")},i.onclick=()=>{let t=document.getElementById("inputTask").value;r.push(new e(t)),d(),localStorage.setItem("lists",JSON.stringify(r)),c.classList.remove("active"),n.classList.remove("active")},a.onclick=()=>{let e=document.getElementById("description"),s=e.value;if(console.log(s),""!=s){const o=p();return o.add(new t(s)),k().innerHTML="",g(o).forEach((t=>{k().append(t)})),e.value="",void localStorage.setItem("lists",JSON.stringify(r))}console.log(s),alert("the task field is empty")},n.onclick=()=>{c.classList.remove("active"),n.classList.remove("active"),document.getElementsByClassName("currentList")[0].classList.remove("currentList"),s.remove()};let r=[];null!=localStorage.getItem("lists")&&(console.log(localStorage.getItem("lists")),JSON.parse(localStorage.getItem("lists")).forEach((t=>{let s=t.tasks,o=new e(t.title);s.forEach((t=>{o.add(t)})),r.push(o),console.log(o)})),console.log(JSON.parse(localStorage.getItem("lists")))),new e("list one"),new e("list two"),new t("nothing to do yet"),new t("same");const d=()=>{o.innerHTML="";for(const t of r){let e=document.createElement("div");e.classList.add("list"),m(e);const s=document.createElement("div");s.classList.add("tasks"),g(t).forEach((t=>{s.append(t)})),e.append(u(t),s),o.append(e)}},m=t=>{t.onclick=()=>{t.classList.add("currentList"),n.classList.add("active"),null==document.querySelector(".currentList")&&n.classList.remove("active"),null==document.querySelector(".currentList #formCreateTask")&&t.getElementsByClassName("tasks")[0].append(s)}},u=t=>{const e=document.createElement("div");e.classList.add("title");const s=document.createElement("div");s.id="dummy";const o=document.createElement("p"),c=document.createElement("div");return c.id="bin",c.onclick=()=>{confirm("are you sure you want to delete the list '"+t.title+"'?")&&(r.splice(r.indexOf(t)),localStorage.setItem("lists",JSON.stringify(r)),d(),n.classList.remove("active"))},o.textContent=t.title,e.append(s,o,c),e},g=t=>{const e=[];for(const s of t.tasks){let o=document.createElement("p"),n=document.createElement("input");o.onclick=()=>{},n.type="checkbox",n.onclick=()=>{const e=t.tasks.indexOf(s);t.tasks.splice(e,1),o.remove(),console.log(p().tasks),localStorage.setItem("lists",JSON.stringify(r))},o.append(n,s.description),e.push(o)}return e},p=()=>{const t=document.querySelector(".currentList .title").textContent;return r.filter((e=>e.title==t))[0]},k=()=>document.querySelector(".currentList .tasks");d(),localStorage.setItem("lists",JSON.stringify(r))})();